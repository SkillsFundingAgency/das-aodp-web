@using SFA.DAS.AODP.Web.Models.GdsComponents
@model PaginationModel

@{
    var maxMiniPagingSize = 3;
    var maxNumberOfPages = 5;
    var blocks = new List<int>();

    if (Model.MaxPageNumber <= maxNumberOfPages)
    {
        for (var i = 1; i <= Model.MaxPageNumber; i++)
        {
            blocks.Add(i);
        }
    }
    else
    {
        if (Model.CurrentPage <= maxMiniPagingSize)
        {
            for (var i = 1; i <= maxMiniPagingSize; i++)
            {
                blocks.Add(i);
            }
            blocks.Add(0); // Ellipsis
            blocks.Add(Model.MaxPageNumber);
        }
        else if (Model.CurrentPage > Model.MaxPageNumber - maxMiniPagingSize)
        {
            blocks.Add(1);
            blocks.Add(0); // Ellipsis
            for (var i = Model.MaxPageNumber - maxMiniPagingSize; i <= Model.MaxPageNumber; i++)
            {
                blocks.Add(i);
            }
        }
        else
        {
            blocks.Add(1);
            blocks.Add(0); // Ellipsis
            for (var i = Model.CurrentPage - 1; i <= Model.CurrentPage + 1; i++)
            {
                blocks.Add(i);
            }
            blocks.Add(0); // Ellipsis
            blocks.Add(Model.MaxPageNumber);
        }
    }
}

<govuk-pagination>
    @if (Model.CurrentPage > 1)
    {
        <govuk-pagination-previous href="#" />
    }

    @foreach (var block in blocks)
    {
        if (block == 0)
        {
            <govuk-pagination-ellipsis />
        }
        else
        {
            <govuk-pagination-item href="#" is-current="@(Model.CurrentPage == block)">@block</govuk-pagination-item>
        }
    }

    @if (Model.CurrentPage < Model.MaxPageNumber)
    {
        <govuk-pagination-next href="#" />
    }

</govuk-pagination>
